<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmoCog Research (Multilingual)</title>

    <link rel="stylesheet" href="style.css">

    <!-- MediaPipe Vision (Face Landmarker) -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.14/vision_bundle.mjs" type="module"></script>
    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ MediaPipe –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è non-module —Å–∫—Ä–∏–ø—Ç–æ–≤
        import('https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.14/vision_bundle.mjs')
            .then(vision => {
                window.FilesetResolver = vision.FilesetResolver;
                window.FaceLandmarker = vision.FaceLandmarker;
                window.ImageSegmenter = vision.ImageSegmenter;
                console.log('[MediaPipe] Vision modules loaded (FaceLandmarker + ImageSegmenter)');
            })
            .catch(err => console.error('[MediaPipe] Load error:', err));
    </script>
    
    <!-- PreCheck Analyzer Module (v2.0 MediaPipe Face Landmarker) -->
    <script src="js/precheck-analyzer.js?v=2.1.2"></script>
    <!-- Face Segmenter Module (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —á–∞—Å—Ç–µ–π –ª–∏—Ü–∞) -->
    <script src="js/face-segmenter.js?v=1.2.2"></script>
    <!-- QC Metrics Module -->
    <script src="js/qc-metrics.js?v=3.3.0"></script>
    <!-- Gaze Tracker Module (iris landmarks ‚Üí screen coordinates) -->
    <script src="js/gaze-tracker.js?v=2.2.0"></script>
    
    
</head>
<body>
    <!-- Fullscreen –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ -->
    <div id="fullscreenCalibration" class="fullscreen-calibration">
        <div class="calib-instruction">
            <span id="calibInstructionText">üëÜ –ö–ª–∏–∫–∞–π—Ç–µ –Ω–∞ –∫—Ä–∞—Å–Ω—É—é —Ç–æ—á–∫—É, —Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–µ—ë</span>
            <div class="calib-progress">
                <span id="calibProgressText">–¢–æ—á–∫–∞ 1 –∏–∑ 25</span>
            </div>
        </div>
        <div id="fullscreenCalibPoint" class="fullscreen-calib-point"></div>
    </div>

    <!-- –û–±–ª–∞—Å—Ç—å —Ç–µ—Å—Ç–∞ —Å–ª–µ–∂–µ–Ω–∏—è –∑–∞ —Ñ–∏–≥—É—Ä–∞–º–∏ (fullscreen) -->
    <div id="trackingTestArea" class="tracking-test-area">
        <div class="test-progress">
            <span id="testProgressText">–°–ª–µ–¥–∏—Ç–µ –≥–ª–∞–∑–∞–º–∏ –∑–∞ —Ñ–∏–≥—É—Ä–æ–π</span>
            <div class="test-progress-bar">
                <div class="test-progress-fill" id="testProgressFill" style="width: 0%"></div>
            </div>
        </div>
        <div id="testShape" class="test-shape circle"></div>
    </div>

    <!-- –ù–∞—à–∞ —Ç–æ—á–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤–∑–≥–ª—è–¥–∞ -->
    <div id="customGazeDot"></div>

    <!-- –®–∞–ø–∫–∞ -->
    <div class="top-bar">
        <div class="header-left">EmoCog Research</div>
        <div class="header-right">
            <div id="idDisplay" class="id-badge" onclick="copyIds()" title="Copy ID">ID: ...</div>
            
            <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞ -->
            <div class="lang-switch">
                <div class="lang-btn active" id="langRu" onclick="setLanguage('ru')">RU</div>
                <div style="color:#E5E7EB">|</div>
                <div class="lang-btn" id="langEn" onclick="setLanguage('en')">EN</div>
            </div>
        </div>
    </div>

    <div class="container">
        
        <!-- –®–ê–ì 1: –õ—ç–Ω–¥–∏–Ω–≥ -->
        <div id="step1" class="step active">
            <h1 data-i18n="welcome_title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h1>
            <p class="text-center" data-i18n="welcome_subtitle">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ—Ü–µ–Ω–∫–∏ –≤–Ω–∏–º–∞–Ω–∏—è –∏ —ç–º–æ—Ü–∏–π</p>
            
            <div class="warning-container">
                <strong class="warning-title" data-i18n="warning_title">‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong>
                <ul class="warning-list">
                    <li data-i18n="warning_1">–í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤–µ–±-–∫–∞–º–µ—Ä–∞</li>
                    <li data-i18n="warning_2">–î–∞–Ω–Ω—ã–µ –æ –≤–∑–≥–ª—è–¥–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ</li>
                    <li data-i18n="warning_3">–ú—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤–∏–¥–µ–æ –≤–∞—à–µ–≥–æ –ª–∏—Ü–∞</li>
                </ul>
            </div>

            <button class="btn" id="btnStartIntro" data-i18n="btn_start">–ù–∞—á–∞—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ</button>
        </div>

        <!-- –®–ê–ì 2: –°–æ–≥–ª–∞—Å–∏–µ -->
        <div id="step2" class="step">
            <h2 data-i18n="consent_header">–ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ</h2>
            <div class="consent-box">
                <h4 data-i18n="consent_1_title">1. –¶–µ–ª—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</h4>
                <p data-i18n="consent_1_text">–ú—ã –ø—Ä–æ–≤–æ–¥–∏–º –Ω–∞—É—á–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π. –í–∞—à–µ —É—á–∞—Å—Ç–∏–µ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –ª—é–¥–∏ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.</p>
                <h4 data-i18n="consent_2_title">2. –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</h4>
                <p data-i18n="consent_2_text">–ú—ã —Å–æ–±–∏—Ä–∞–µ–º –æ–±–µ–∑–ª–∏—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –í–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.</p>
                <p><a href="https://docs.google.com/document/d/1ILmtItogsXz78ozzsKLNkmWnRVm990MvSryaDPSbxzg/edit?usp=sharing" target="_blank" data-i18n="consent_link">–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å–æ–≥–ª–∞—Å–∏—è</a></p>
            </div>
            <label class="checkbox-wrapper">
                <input type="checkbox" id="consentCheck">
                <span data-i18n="consent_checkbox">–Ø –ø—Ä–æ—á–∏—Ç–∞–ª(–∞), –º–Ω–µ –µ—Å—Ç—å 18 –ª–µ—Ç, –∏ —è —Å–æ–≥–ª–∞—Å–µ–Ω(–∞).</span>
            </label>
            <button class="btn" id="consentBtn" data-i18n="btn_confirm" disabled>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>

        <!-- –®–ê–ì 3: Email -->
        <div id="step3" class="step">
            <h2 data-i18n="reg_title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞</h2>
            <p data-i18n="reg_desc">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –≤–∞—à Email –¥–ª—è —Å–≤—è–∑–∏.</p>
            
            <div class="form-group">
                <label data-i18n="email_label">Email</label>
                <input type="email" id="userEmail" placeholder="name@example.com" onblur="validateEmailField()">
            </div>
            
            <div class="email-field-info">
                <span id="generatedIdPreview"></span>
            </div>

            <button class="btn" data-i18n="btn_next" id="step3NextBtn">–î–∞–ª–µ–µ</button>
        </div>

        <!-- –®–ê–ì 4: –ê–Ω–∫–µ—Ç–∞ -->
         <div id="step4" class="step">
            <h2 data-i18n="form_title">–ê–Ω–∫–µ—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞</h2>
            <form id="userForm">
                <h3 data-i18n="form_section_user">üë§ –û –≤–∞—Å</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="label_age">–í–æ–∑—Ä–∞—Å—Ç</label>
                        <input type="number" id="age" min="18" max="99" required>
                    </div>
                    <div class="form-group">
                        <label data-i18n="label_gender">–ü–æ–ª</label>
                        <select id="gender" required>
                            <option value="" disabled selected data-i18n="opt_select">–í—ã–±—Ä–∞—Ç—å...</option>
                            <option value="m" data-i18n="opt_m">–ú—É–∂—Å–∫–æ–π</option>
                            <option value="f" data-i18n="opt_f">–ñ–µ–Ω—Å–∫–∏–π</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="label_lang">–†–æ–¥–Ω–æ–π —è–∑—ã–∫</label>
                        <select id="language">
                            <option value="ru" data-i18n="opt_ru">–†—É—Å—Å–∫–∏–π</option>
                            <option value="en" data-i18n="opt_en">English</option>
                            <option value="other" data-i18n="opt_other">–î—Ä—É–≥–æ–π</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="label_edu">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</label>
                        <select id="education">
                            <option value="student" data-i18n="opt_edu_school">–°—Ä–µ–¥–Ω–µ–µ</option>
                            <option value="student" data-i18n="opt_edu_student">–°—Ç—É–¥–µ–Ω—Ç</option>
                            <option value="higher" data-i18n="opt_edu_higher">–í—ã—Å—à–µ–µ</option>
                            <option value="degree" data-i18n="opt_edu_degree">–£—á–µ–Ω–∞—è —Å—Ç–µ–ø–µ–Ω—å</option>
                        </select>
                    </div>
                </div>

                <h3 data-i18n="form_section_tech">üëÅÔ∏è –ó—Ä–µ–Ω–∏–µ –∏ –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="label_vision">–ó—Ä–µ–Ω–∏–µ</label>
                        <select id="vision">
                            <option value="normal" data-i18n="opt_vis_norm">–ù–æ—Ä–º–∞</option>
                            <option value="glasses" data-i18n="opt_vis_glass">–û—á–∫–∏</option>
                            <option value="lenses" data-i18n="opt_vis_lens">–õ–∏–Ω–∑—ã</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="label_pathology">–ü–∞—Ç–æ–ª–æ–≥–∏–∏</label>
                        <select id="visionIssues">
                            <option value="none" data-i18n="opt_path_none">–ù–µ—Ç</option>
                            <option value="hemianopsia" data-i18n="opt_path_hemi">–ì–µ–º–∏–∞–Ω–æ–ø—Å–∏—è</option>
                            <option value="scotoma" data-i18n="opt_path_scot">–°–∫–æ—Ç–æ–º–∞</option>
                            <option value="colorblind" data-i18n="opt_path_color">–î–∞–ª—å—Ç–æ–Ω–∏–∑–º</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="label_hand">–í–µ–¥—É—â–∞—è —Ä—É–∫–∞</label>
                        <select id="hand">
                            <option value="right" data-i18n="opt_hand_r">–ü—Ä–∞–≤–∞—è</option>
                            <option value="left" data-i18n="opt_hand_l">–õ–µ–≤–∞—è</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="label_device">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞</label>
                        <select id="inputDevice">
                            <option value="mouse" data-i18n="opt_dev_mouse">–ú—ã—à—å</option>
                            <option value="touchpad" data-i18n="opt_dev_touch">–¢–∞—á–ø–∞–¥</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="label_keyboard">–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞</label>
                         <select id="keyboardType">
                            <option value="internal" data-i18n="opt_kb_int">–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è</option>
                            <option value="external" data-i18n="opt_kb_ext">–í–Ω–µ—à–Ω—è—è</option>
                        </select>
                    </div>
                </div>
            </form>
            <button class="btn" id="formBtn" data-i18n="btn_next">–î–∞–ª–µ–µ</button>
        </div>

        <!-- –®–ê–ì 5: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–º–µ—Ä—ã (pre-check) -->
        <div id="step5" class="step">
            <h2 data-i18n="calib_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–º–µ—Ä—ã</h2>
            <p data-i18n="calib_desc" style="text-align: center;">–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏–º —É—Å–ª–æ–≤–∏—è –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏, –∑–∞—Ç–µ–º –Ω–∞—á–Ω—ë–º –∫–∞–ª–∏–±—Ä–æ–≤–∫—É.</p>
            
            <div id="precheckContainer" class="precheck-container">
                <!-- –ü—Ä–µ–≤—å—é –∫–∞–º–µ—Ä—ã -->
                <div id="cameraPreview" class="camera-preview">
                    <video id="precheckVideo" autoplay playsinline muted></video>
                    <canvas id="overlayCanvas"></canvas>
                    <div class="face-guide"></div>
                    <div class="guide-text" data-i18n="guide_text">–†–∞—Å–ø–æ–ª–æ–∂–∏—Ç–µ –ª–∏—Ü–æ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–º–∫–∏</div>
                </div>
                
                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã -->
                <div class="indicators">
                    <div class="indicator" id="LightIndicator">
                        <div class="icon">üí°</div>
                        <div class="label" data-i18n="label_light">–û—Å–≤–µ—â–µ–Ω–∏–µ</div>
                        <div class="progress-container">
                            <div class="progress-bar" id="LightProgress"></div>
                        </div>
                        <div class="status" id="LightStatus" data-i18n="status_waiting">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
                    </div>
                    
                    <div class="indicator" id="FaceIndicator">
                        <div class="icon">üë§</div>
                        <div class="label" data-i18n="label_face">–õ–∏—Ü–æ</div>
                        <div class="progress-container">
                            <div class="progress-bar" id="FaceProgress"></div>
                        </div>
                        <div class="status" id="FaceStatus" data-i18n="status_waiting">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
                    </div>
                    
                    <div class="indicator" id="PoseIndicator">
                        <div class="icon">üéØ</div>
                        <div class="label" data-i18n="label_pose">–ü–æ–∑–∞ –≥–æ–ª–æ–≤—ã</div>
                        <div class="progress-container">
                            <div class="progress-bar" id="PoseProgress"></div>
                        </div>
                        <div class="status" id="PoseStatus" data-i18n="status_waiting">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
                    </div>
                    
                    <div class="indicator" id="VisibilityIndicator">
                        <div class="icon">üëÅÔ∏è</div>
                        <div class="label" data-i18n="label_visibility">–í–∏–¥–∏–º–æ—Å—Ç—å –ª–∏—Ü–∞</div>
                        <div class="progress-container">
                            <div class="progress-bar" id="VisibilityProgress"></div>
                        </div>
                        <div class="status" id="VisibilityStatus" data-i18n="status_waiting">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
                    </div>
                </div>
                
                <!-- –°—Ç–∞—Ç—É—Å -->
                <div class="precheck-status">
                    <p class="status-message" id="statusMessage" data-i18n="precheck_initial">
                        –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É" —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É
                    </p>
                </div>
            </div>
            
            
            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="action-buttons">
                <button class="btn" id="startPrecheckBtn" data-i18n="btn_start_precheck">
                    üé• –ù–∞—á–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É
                </button>
                <button class="btn" id="startCalibBtn" data-i18n="btn_start_calib" class="hidden">
                    ‚úÖ –ù–∞—á–∞—Ç—å –∫–∞–ª–∏–±—Ä–æ–≤–∫—É
                </button>
            </div>
        </div>

        <div id="step6" class="step">
            <div id="testHubContainer" class="test-hub-container" style="display: none;">
                <h2 data-i18n="test_hub_title">–í—ã–±–æ—Ä —Ç–µ—Å—Ç–∞</h2>
                <p id="testHubSubtitle" class="text-center" data-i18n="test_hub_subtitle">
                    –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π.
                </p>

                <div class="test-hub-grid">
                    <button class="test-card-btn" id="hubRunRtBtn" data-i18n="test_card_rt_title">RT test (Go/NoGo)</button>
                    <button class="test-card-btn" id="hubRunTrackingBtn" data-i18n="test_card_tracking_title">Tracking test</button>
                    <button class="test-card-btn" id="hubRunVpcBtn" data-i18n="test_card_vpc_title">VPC (Felidae)</button>
                    <button class="test-card-btn" id="hubRunVisuospatialBtn" data-i18n="test_card_visuospatial_title">Visuospatial drawing</button>
                </div>

                <div id="testHubLastResult" class="test-hub-last-result"></div>

                <div class="test-hub-actions">
                    <button class="btn btn-secondary" id="hubFinishSessionBtn" data-i18n="test_hub_finish">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é</button>
                </div>
            </div>

            <div id="gazeTestsContainer" class="gaze-tests-container" style="display: none;">
                <div id="vpcTestScreen" class="gaze-test-screen vpc-screen" style="display: none;">
                    <h2 data-i18n="test_card_vpc_title">VPC (Felidae)</h2>
                    <p class="text-center" data-i18n="vpc_instruction">
                        –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ. –ù–∞–∂–∏–º–∞—Ç—å –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ.
                    </p>
                    <div id="vpcProgressText" class="test-meta"></div>
                    <div id="vpcPhaseText" class="test-meta"></div>

                    <div id="vpcFixationMark" class="vpc-fixation">+</div>
                    <img id="vpcCenterImage" class="vpc-center-image" alt="" style="display: none;">

                    <div class="vpc-pair-row">
                        <img id="vpcLeftImage" class="vpc-side-image" alt="" style="display: none;">
                        <img id="vpcRightImage" class="vpc-side-image" alt="" style="display: none;">
                    </div>
                </div>

                <div id="visuospatialTestScreen" class="gaze-test-screen visuospatial-screen" style="display: none;">
                    <h2 data-i18n="test_card_visuospatial_title">Visuospatial drawing</h2>
                    <h3 id="visuospatialPromptTitle"></h3>
                    <p id="visuospatialPromptText" class="text-center"></p>
                    <p id="visuospatialStatusText" class="test-meta"></p>

                    <div class="visuospatial-controls">
                        <button class="btn" id="visuospatialStartBtn" data-i18n="visuospatial_btn_start">–ù–∞—á–∞—Ç—å —Ä–∏—Å–æ–≤–∞–Ω–∏–µ</button>
                        <button class="btn btn-secondary" id="visuospatialFinishBtn" data-i18n="visuospatial_btn_finish">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
                    </div>

                    <div class="visuospatial-canvas-wrap">
                        <canvas id="visuospatialCanvas"></canvas>
                        <div id="visuospatialGazeDot"></div>
                    </div>
                </div>
            </div>

            <div id="cognitiveContainer" class="cognitive-container">
                
                <div id="cognitiveInstruction" class="card p-4">
                    <h2 id="cogTitle" class="mb-4">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h2>
                    <div id="cogText" class="text-secondary mb-4" style="text-align: center; white-space: pre-wrap;">
                        </div>

                    <div id="cogCheckContainer" class="consent-block mb-4" style="display: none;">
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="cogCheck">
                            <span id="cogCheckText">–Ø –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–ª(–∞) –ø—Ä–∞–≤–∏–ª–∞ –∏ –º–Ω–µ –≤—Å—ë –ø–æ–Ω—è—Ç–Ω–æ</span>
                        </label>
                    </div>

                    <div class="text-center">
                        <button class="btn" id="cogStartBtn">–î–∞–ª–µ–µ</button>
                    </div>
                </div>

                <div id="cognitiveStimulusArea" class="cognitive-stimulus-area" style="display: none;">
                    <div id="cogShape" class="cog-shape"></div>
                    <img id="cogImage" class="cog-image" style="display: none; max-width: 80vh; max-height: 80vh; object-fit: contain;">
                    
                    <div id="cogFixation" class="cog-fixation" style="display:none; font-size: 80px; font-weight: 300; color: white;">+</div>
                    <div id="cogFeedback" class="cog-feedback" style="display: none; font-size: 40px; font-weight: bold; margin-top: 20px;"></div>
                </div>
                
            </div>
        </div>

        <!-- –®–ê–ì 7: –§–∏–Ω–∞–ª -->
        <div id="step7" class="step">
            <h2 data-i18n="final_title">–°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
            <p data-i18n="final_desc">–°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ. –î–∞–Ω–Ω—ã–µ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã.</p>
            
            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫ QC —Å—Ç–∞—Ç—É—Å–∞ -->
            <div id="qcStatusBlock">
                <div class="qc-status-passed">
                    <span data-i18n="qc_passed">‚úÖ –î–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–Ω—ã (QC Passed)</span>
                </div>
            </div>
            
            <button class="btn" id="downloadBtn" data-i18n="btn_download">üì• –°–∫–∞—á–∞—Ç—å JSON</button>
            <button class="btn btn-secondary" id="restartBtn" data-i18n="btn_restart">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
        </div>

    </div>

    <script type="module" src="js/web-page/app.js"></script>
    
</body>
</html>